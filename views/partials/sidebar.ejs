<!-- views/partials/sidebar.ejs -->
<aside class="w-64 bg-gray-900 text-white p-4 shadow-xl flex-shrink-0 h-full">
    <nav class="space-y-4">
        <% 
            let links = [];
            let dashboardUrl = '/';

            // Check if user object exists and has a role
            if (user && user.role) {
                if (user.role === 'customer') {
                    dashboardUrl = '/customer/dashboard';
                    links = [
                        { href: '/customer/dashboard', icon: 'fa-gauge', label: 'Dashboard' },
                        { href: '/customer/shipments', icon: 'fa-box', label: 'My Shipments' },
                        { href: '/customer/booking/new', icon: 'fa-plus-circle', label: 'New Booking' },
                        { href: '/customer/profile', icon: 'fa-user-circle', label: 'Profile' }
                    ];
                } else if (user.role === 'admin') {
                    dashboardUrl = '/admin/dashboard';
                    links = [
                        { href: '/admin/dashboard', icon: 'fa-shield-alt', label: 'Admin Dashboard' },
                        { href: '/admin/users', icon: 'fa-users', label: 'User Mgmt' },
                        { href: '/admin/all-shipments', icon: 'fa-boxes-packing', label: 'All Shipments' },
                        { href: '/admin/carrier-config', icon: 'fa-truck-fast', label: 'Carrier Config' }
                    ];
                }
            } 
        %>

        <!-- Sidebar Header (Dashboard Link) -->
        <% if (user) { %>
            <div class="py-2 mb-4 border-b border-indigo-600">
                <a href="<%= dashboardUrl %>" class="flex items-center text-lg font-bold text-indigo-400 hover:text-indigo-300 transition duration-150">
                    <i class="fas fa-home mr-3"></i>
                    <span>Home</span>
                </a>
            </div>
        <% } %>

        <!-- Navigation Links -->
        <ul class="space-y-2">
            <% links.forEach(link => { %>
                <li>
                    <a href="<%= link.href %>" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-indigo-700 hover:text-white transition duration-200">
                        <i class="fas <%= link.icon %> w-5 mr-3"></i>
                        <span class="font-medium"><%= link.label %></span>
                    </a>
                </li>
            <% }); %>
        </ul>
    </nav>
</aside>
